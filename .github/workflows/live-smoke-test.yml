name: Live-Smoke-Test

on: push
  # push:
    # branches:
    #   - master

jobs:
  Cypress-SmokeTest:
    environment: Production
    runs-on: ubuntu-latest
    container: cypress/browsers:node12.18.3-chrome87-ff82
    steps:
      - name: "Checkout Code ‚òÅÔ∏è"
        uses: actions/checkout@v2
      # Install NPM dependencies, cache them correctly and run all Cypress tests
      - name: "Run Smoke Tests with Cypress üîé"
        uses: cypress-io/github-action@v4
        with:
          browser: chrome
          record: true
        env:
          CYPRESS_RECORD_KEY: ${{ secrets.CYPRESS_RECORD_KEY }}
          # pass GitHub token to allow accurately detecting a build vs a re-run build
          # GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          CYPRESS_PROJECT_ID: ${{ secrets.PROJECT_ID }}